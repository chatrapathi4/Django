<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>{% block title %}MyFirstDjango{% endblock %}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    {% load static %}
    <!-- Add a clean modern font -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        /* Theme Switch styling */
        body {
            transition: all 0.3s ease-in-out;
        }

        .card, .card-body {
            transition: all 0.3s ease-in-out;
        }

        .dark-theme {
            background-color: #222 !important;
            color: #ffffff !important;
        }

        .light-theme {
            background-color: powderblue !important;
            color: #111 !important;
        }

        .dark-theme .card,
        .dark-theme .card-body {
            background-color: #2d3238 !important;
            color: #fff !important;
            border-color: #444 !important;
            box-shadow: 0 4px 6px rgba(0,0,0,0.3) !important;
        }

        .light-theme .card,
        .light-theme .card-body {
            background-color: #fff !important;
            color: #111 !important;
            border-color: #ddd !important;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1) !important;
        }

        /* global button overrides (affects all .btn) */
        :root{
            --btn-radius:12px;
            --btn-height:52px;
            --btn-font:1.15rem;
        }

        .btn {
            border-radius: var(--btn-radius) !important;
            height: var(--btn-height) !important;
            font-size: var(--btn-font) !important;
            padding: .35rem .6rem !important;
            transition: background-color .2s ease, transform .12s ease;
        }

        .btn-undo { height:46px; font-size:1rem; padding:.25rem .5rem; }
        .calc-equals { height:46px; font-size:1rem; padding:.35rem .5rem; }

        .dark-theme .btn { /* dark overrides */ background:#333; color:#fff; border-color:#444; }

        body { font-family: "Inter", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial; }
    </style>
</head>
<body>
    {% include 'navbar.html' %}
    {% block content %}
    {% endblock %}
    
    <script>
        // Theme toggle logic with persistence
        document.addEventListener('DOMContentLoaded', () => {
            const themeSwitch = document.getElementById('checkbox');
            const currentTheme = localStorage.getItem('theme');

            // Apply theme on page load
            if (currentTheme === 'dark-theme') {
                document.body.classList.remove('light-theme');
                document.body.classList.add('dark-theme');
                document.body.style.backgroundColor = "#222";
                if (themeSwitch) themeSwitch.checked = true;
            } else {
                document.body.classList.remove('dark-theme');
                document.body.classList.add('light-theme');
                document.body.style.backgroundColor = "powderblue";
                if (themeSwitch) themeSwitch.checked = false;
            }

            // Theme switch event listener
            if (themeSwitch) {
                themeSwitch.addEventListener('change', function(e) {
                    if (e.target.checked) {
                        document.body.classList.remove('light-theme');
                        document.body.classList.add('dark-theme');
                        document.body.style.backgroundColor = "#222";
                        localStorage.setItem('theme', 'dark-theme');
                    } else {
                        document.body.classList.remove('dark-theme');
                        document.body.classList.add('light-theme');
                        document.body.style.backgroundColor = "powderblue";
                        localStorage.setItem('theme', 'light-theme');
                    }
                });
            }
        });
    </script>
    {% block extra_js %}
    {% endblock %}
</body>
</html>